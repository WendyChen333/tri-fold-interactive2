<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>互動三折頁｜Tri‑fold Interactive Brochure</title>
  <style>
    :root{
      --bg:#0b0c10; --ink:#f3f4f6; --accent:#7dd3fc; --muted:#9ca3af;
    }
    html,body{height:100%;}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans TC", "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 50% -10%, #111827, #0b0c10);
      color:var(--ink); display:flex; flex-direction:column; align-items:center; gap:16px; padding:24px;}

    .toolbar{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center;
      background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08);
      padding:10px 12px; border-radius:14px; backdrop-filter: blur(8px);
    }
    .toolbar button{ cursor:pointer; border:none; padding:10px 14px; border-radius:12px;
      font-weight:600; color:#0b1220; background:var(--ink); transition: transform .06s ease;
    }
    .toolbar button.secondary{ background:#1f2937; color:#e5e7eb; border:1px solid #374151; }
    .toolbar button:active{ transform:translateY(1px); }
    .hint{font-size:12px; color:var(--muted); text-align:center;}

    /* --- Brochure Stage --- */
    .stage {
      width:min(1100px, 95vw);
      aspect-ratio: 3 / 2; /* 3 panels wide, 2 units tall (roughly A4 landscape proportion) */
      position:relative; perspective:1600px; perspective-origin:50% 50%;
      border-radius:18px; overflow:hidden; background: #0f172a;
      box-shadow: 0 30px 80px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
      user-select:none; -webkit-user-drag: none;
    }
    .desk{position:absolute; inset:0; background:radial-gradient(50% 120% at 50% 0%, #111827 0%, #0b0c10 60%, #060708 100%);}    

    /* Brochure wrapper enables pan/zoom */
    .viewport{position:absolute; inset:0; overflow:hidden;}
    .brochure{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:90%; height:80%; display:flex; transform-style:preserve-3d;
    }

    .panel{ position:relative; flex:1 1 33.333%; transform-style:preserve-3d; transition: transform 900ms cubic-bezier(.2,.7,.2,1);
      border-left:1px solid rgba(255,255,255,0.06);
      border-right:1px solid rgba(0,0,0,0.25);
    }
    .panel:first-child{border-left:none}
    .panel:last-child{border-right:none}

    .face{ position:absolute; inset:0; backface-visibility:hidden; overflow:hidden; border-radius:8px; }
    .face img{ width:100%; height:100%; object-fit:cover; display:block; }

    /* Origins for realistic folding */
    .panel.left{ transform-origin: left center; }
    .panel.center{ transform-origin: center center; }
    .panel.right{ transform-origin: right center; }

    /* Closed = outer faces visible */
    .panel .front{ transform: rotateY(0deg); }
    .panel .back{ transform: rotateY(180deg); }

    /* When opened: flip all three panels to reveal inner/back sides.
       Left swings outward (negative), right outward (positive), center flips in place. */
    .brochure.open .panel.left{ transform: rotateY(-180deg); }
    .brochure.open .panel.center{ transform: rotateY(180deg); }
    .brochure.open .panel.right{ transform: rotateY(180deg); }

    /* Soft shadow while folding */
    .panel::after{ content:""; position:absolute; inset:0; pointer-events:none; transition: opacity 900ms;
      background: linear-gradient(90deg, rgba(0,0,0,.28), rgba(0,0,0,0) 30%, rgba(255,255,255,.06) 50%, rgba(0,0,0,0) 70%, rgba(0,0,0,.28));
      opacity:.0;
    }
    .brochure.open .panel::after{ opacity:.4; }

    /* Zoom states */
    .viewport.zoomed{ cursor: grab; }
    .viewport.zoomed:active{ cursor: grabbing; }
  </style>
</head>
<body>

  <div class="toolbar">
    <button id="toggleOpen">打開/收合 三折頁</button>
    <button id="zoomIn" class="secondary">放大</button>
    <button id="zoomOut" class="secondary">縮小</button>
    <button id="reset" class="secondary">重置視圖</button>
  </div>
  <div class="hint">小技巧：點「打開/收合」可模擬實體三折頁展開；放大後可拖曳檢視細節（雙擊也能快速放大/縮小）。</div>

  <div class="stage" id="stage">
    <div class="desk"></div>
    <div class="viewport" id="viewport">
      <div class="brochure" id="brochure">
        <!-- LEFT PANEL -->
        <div class="panel left">
          <div class="face front">
            <!-- 外側左面（折起時看到的那一面） -->
            <img src="outer-left.jpg" alt="外側左面">
          </div>
          <div class="face back">
            <!-- 內側左面（打開後的裡面） -->
            <img src="inner-left.jpg" alt="內側左面">
          </div>
        </div>

        <!-- CENTER PANEL -->
        <div class="panel center">
          <div class="face front">
            <img src="outer-center.jpg" alt="外側中面">
          </div>
          <div class="face back">
            <img src="inner-center.jpg" alt="內側中面">
          </div>
        </div>

        <!-- RIGHT PANEL -->
        <div class="panel right">
          <div class="face front">
            <img src="outer-right.jpg" alt="外側右面">
          </div>
          <div class="face back">
            <img src="inner-right.jpg" alt="內側右面">
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Toggle fold open/close ---
    const brochure = document.getElementById('brochure');
    const toggleOpen = document.getElementById('toggleOpen');
    toggleOpen.addEventListener('click', ()=>{
      brochure.classList.toggle('open');
    });

    // --- Simple pan & zoom ---
    const viewport = document.getElementById('viewport');
    let scale = 1, minScale = 1, maxScale = 3.5;
    let tx = 0, ty = 0; // translation
    let isDragging = false; let lastX=0, lastY=0;

    function applyTransform(){
      brochure.style.transform = `translate(calc(-50% + ${tx}px), calc(-50% + ${ty}px)) scale(${scale})`;
    }

    function zoomTo(newScale, cx=null, cy=null){
      newScale = Math.min(maxScale, Math.max(minScale, newScale));
      if(cx!==null && cy!==null){
        // Zoom towards pointer: adjust translate so the point under cursor stays in place
        const rect = viewport.getBoundingClientRect();
        const vx = cx - rect.left - rect.width/2 - tx; // current relative
        const vy = cy - rect.top - rect.height/2 - ty;
        const ratio = newScale/scale - 1;
        tx -= vx * ratio; ty -= vy * ratio;
      }
      scale = newScale; applyTransform();
      viewport.classList.toggle('zoomed', scale>1.01);
    }

    // Buttons
    document.getElementById('zoomIn').onclick = () => zoomTo(scale*1.25, viewport.clientWidth/2, viewport.clientHeight/2);
    document.getElementById('zoomOut').onclick = () => zoomTo(scale/1.25, viewport.clientWidth/2, viewport.clientHeight/2);
    document.getElementById('reset').onclick = () => { scale=1; tx=0; ty=0; applyTransform(); viewport.classList.remove('zoomed'); };

    // Dragging
    function onDown(e){ isDragging = true; lastX = (e.touches? e.touches[0].clientX : e.clientX); lastY = (e.touches? e.touches[0].clientY : e.clientY); }
    function onMove(e){ if(!isDragging||scale<=1.01) return; const x=(e.touches? e.touches[0].clientX : e.clientX); const y=(e.touches? e.touches[0].clientY : e.clientY); tx += (x-lastX); ty += (y-lastY); lastX=x; lastY=y; applyTransform(); }
    function onUp(){ isDragging=false; }

    viewport.addEventListener('mousedown', onDown); viewport.addEventListener('mousemove', onMove); window.addEventListener('mouseup', onUp);
    viewport.addEventListener('touchstart', onDown, {passive:true}); viewport.addEventListener('touchmove', onMove, {passive:true}); window.addEventListener('touchend', onUp);

    // Wheel zoom
    viewport.addEventListener('wheel', (e)=>{ e.preventDefault(); const delta = e.deltaY; zoomTo(scale * (delta>0? 0.9 : 1.1), e.clientX, e.clientY); }, {passive:false});

    // Double click/tap zoom toggle
    let lastTap = 0;
    viewport.addEventListener('click', (e)=>{
      const now = Date.now();
      if(now - lastTap < 300){
        // double
        if(scale<1.5){ zoomTo(2.2, e.clientX, e.clientY); }
        else { zoomTo(1, e.clientX, e.clientY); tx=0; ty=0; applyTransform(); viewport.classList.remove('zoomed'); }
      }
      lastTap = now;
    });

    // Initialize transform
    applyTransform();
  </script>
</body>
</html>
